import { useState, useEffect, useRef } from "react";

import {
  StyleSheet,
  Text,
  View,
  Dimensions,
  TouchableOpacity,
  Button,
  ActivityIndicator,
} from "react-native";
import { Ionicons } from "@expo/vector-icons";
import { Audio } from "expo-av";
import * as FileSystem from "expo-file-system";

import { OPEN_WEATHER_API_KEY } from "@env";

import { CustomStatusBar } from "../components";
import {
  temperatureReadOutSounds,
  readWeather,
  weatherAudioData,
} from "../utilities";

const DEVICE_HEIGHT = Dimensions.get("window").height;

export default function PlayAudio({ navigation }) {
  const sounds = useRef([]);

  const [isLoading, setIsLoading] = useState(false);
  const [weatherReading, setWeatherReading] = useState(null);
  const [readWeatherAudioData, setReadWeatherAudioData] = useState(null);

  const playWeatherAudio = async (data) => {
    setIsLoading(true);
    const fileUri = FileSystem.documentDirectory;

    let currentTempResolve = temperatureReadOutSounds(data.currentTemp);
    currentTempResolve = currentTempResolve.map(
      (number) => `${fileUri}${number}.mp3`
    );

    const audioFiles = [
      `${fileUri}${data.timeOfDayDescription}${data.timeOfDayNumber}.mp3`,
      `${fileUri}${data.timeOfDayDescription}-pre_temp${data.pre_temp}.mp3`,
      `${fileUri}${data.currentTempDecription}.mp3`,
      ...currentTempResolve,
      `${fileUri}${data.unit}.mp3`,
    ];

    console.log("loading sounds");
    try {
      const loadedSounds = await Promise.all(
        audioFiles.map(async (localAudioUri) => {
          console.log("localAudioUri", localAudioUri);
          const { sound } = await Audio.Sound.createAsync({
            uri: localAudioUri,
          });
          return sound;
        })
      );

      // setSounds(loadedSounds);
      sounds.current = loadedSounds;
      setIsLoading(false);
      console.log("sounds loaded");
      playSoundAtIndex(0);
    } catch (error) {
      console.error("An error occurred:", error.message);
    }
  };

  const playSoundAtIndex = async (index) => {
    if (index < sounds.current?.length) {
      const sound = sounds.current[index];

      // Set listener for playback status updates
      const statusListener = sound.setOnPlaybackStatusUpdate(async (status) => {
        if (status.didJustFinish) {
          // Play the next sound when the current sound finishes
          playSoundAtIndex(index + 1);
          //Unload the sound once it is done playing
          sound.unloadAsync();
        }
      });

      // Play the current sound
      await sound.replayAsync();
    } else {
      // alert("done playing");
    }
  };

  const fetchWeatherForecast = async (data) => {
    // console.log(`OPEN_WEATHER_API_KEY:`, OPEN_WEATHER_API_KEY);
    const currentWeatherApiUrl =
      "https://api.openweathermap.org/data/3.0/onecall";

    const { latitude, longitude } = data;

    try {
      //Fetch data for current weather
      const currentWeatherResponse = await fetch(
        `${currentWeatherApiUrl}?lat=${latitude}&lon=${longitude}&appid=${OPEN_WEATHER_API_KEY}&units=metric&exclude=minutely,alerts`
      );

      if (!currentWeatherResponse.ok) {
        alert(
          "Something went wrong fetching current weather data. Please try again later"
        );
      }

      const currentWeatherData = await currentWeatherResponse.json();

      const textReading = readWeather(currentWeatherData);
      setWeatherReading(textReading);

      const audioInput = weatherAudioData(currentWeatherData);
      console.log(`audioInput:`, audioInput);
      playWeatherAudio(audioInput);
      setReadWeatherAudioData(audioInput);
    } catch (error) {
      alert(error.message);
    }
  };

  const ds = {
    current: {
      clouds: 0,
      dew_point: 6.69,
      dt: 1715058199,
      feels_like: 15.34,
      humidity: 53,
      pressure: 1022,
      sunrise: 1715055594,
      sunset: 1715095723,
      temp: 16.27,
      uvi: 0.19,
      visibility: 10000,
      weather: [[Object]],
      wind_deg: 215,
      wind_gust: 1.39,
      wind_speed: 1.32,
    },
    daily: [
      {
        clouds: 0,
        dew_point: 6.52,
        dt: 1715072400,
        feels_like: [Object],
        humidity: 30,
        moon_phase: 0.97,
        moonrise: 1715052240,
        moonset: 1715093580,
        pop: 0,
        pressure: 1020,
        summary: "There will be clear sky today",
        sunrise: 1715055594,
        sunset: 1715095723,
        temp: [Object],
        uvi: 7.57,
        weather: [Array],
        wind_deg: 112,
        wind_gust: 2.89,
        wind_speed: 2.86,
      },
      {
        clouds: 0,
        dew_point: 7.03,
        dt: 1715158800,
        feels_like: [Object],
        humidity: 27,
        moon_phase: 0,
        moonrise: 1715142540,
        moonset: 1715182740,
        pop: 0,
        pressure: 1021,
        summary: "There will be clear sky today",
        sunrise: 1715142021,
        sunset: 1715182090,
        temp: [Object],
        uvi: 7.85,
        weather: [Array],
        wind_deg: 121,
        wind_gust: 4.57,
        wind_speed: 3.67,
      },
      {
        clouds: 0,
        dew_point: 10.65,
        dt: 1715245200,
        feels_like: [Object],
        humidity: 41,
        moon_phase: 0.05,
        moonrise: 1715233020,
        moonset: 1715272080,
        pop: 0,
        pressure: 1021,
        summary: "There will be clear sky today",
        sunrise: 1715228449,
        sunset: 1715268459,
        temp: [Object],
        uvi: 7.51,
        weather: [Array],
        wind_deg: 128,
        wind_gust: 3.65,
        wind_speed: 2.65,
      },
      {
        clouds: 0,
        dew_point: 4.52,
        dt: 1715331600,
        feels_like: [Object],
        humidity: 21,
        moon_phase: 0.08,
        moonrise: 1715323320,
        moonset: 1715361840,
        pop: 0,
        pressure: 1017,
        summary: "There will be clear sky today",
        sunrise: 1715314876,
        sunset: 1715354828,
        temp: [Object],
        uvi: 7.48,
        weather: [Array],
        wind_deg: 58,
        wind_gust: 2.41,
        wind_speed: 2.38,
      },
      {
        clouds: 0,
        dew_point: 2.81,
        dt: 1715418000,
        feels_like: [Object],
        humidity: 16,
        moon_phase: 0.12,
        moonrise: 1715413440,
        moonset: 1715451720,
        pop: 0,
        pressure: 1015,
        summary: "There will be clear sky today",
        sunrise: 1715401304,
        sunset: 1715441199,
        temp: [Object],
        uvi: 7.3,
        weather: [Array],
        wind_deg: 172,
        wind_gust: 10.04,
        wind_speed: 4.32,
      },
      {
        clouds: 100,
        dew_point: 15.83,
        dt: 1715504400,
        feels_like: [Object],
        humidity: 82,
        moon_phase: 0.15,
        moonrise: 1715503200,
        moonset: 1715541780,
        pop: 0.45,
        pressure: 1024,
        rain: 1.77,
        summary: "Expect a day of partly cloudy with rain",
        sunrise: 1715487732,
        sunset: 1715527571,
        temp: [Object],
        uvi: 8,
        weather: [Array],
        wind_deg: 134,
        wind_gust: 10.06,
        wind_speed: 5.59,
      },
      {
        clouds: 100,
        dew_point: 15.09,
        dt: 1715590800,
        feels_like: [Object],
        humidity: 81,
        moon_phase: 0.18,
        moonrise: 1715592540,
        moonset: 1715631660,
        pop: 0.33,
        pressure: 1024,
        rain: 0.54,
        summary: "Expect a day of partly cloudy with rain",
        sunrise: 1715574160,
        sunset: 1715613943,
        temp: [Object],
        uvi: 8,
        weather: [Array],
        wind_deg: 131,
        wind_gust: 9.59,
        wind_speed: 4.67,
      },
      {
        clouds: 73,
        dew_point: 12.47,
        dt: 1715677200,
        feels_like: [Object],
        humidity: 58,
        moon_phase: 0.22,
        moonrise: 1715681400,
        moonset: 1715721420,
        pop: 0.01,
        pressure: 1024,
        summary: "There will be partly cloudy today",
        sunrise: 1715660588,
        sunset: 1715700317,
        temp: [Object],
        uvi: 8,
        weather: [Array],
        wind_deg: 149,
        wind_gust: 7.89,
        wind_speed: 4.81,
      },
    ],
    hourly: [
      {
        clouds: 0,
        dew_point: 6.69,
        dt: 1715058000,
        feels_like: 15.34,
        humidity: 53,
        pop: 0,
        pressure: 1022,
        temp: 16.27,
        uvi: 0.19,
        visibility: 10000,
        weather: [Array],
        wind_deg: 215,
        wind_gust: 1.39,
        wind_speed: 1.32,
      },
      {
        clouds: 0,
        dew_point: 6.63,
        dt: 1715061600,
        feels_like: 16.2,
        humidity: 50,
        pop: 0,
        pressure: 1022,
        temp: 17.13,
        uvi: 1.04,
        visibility: 10000,
        weather: [Array],
        wind_deg: 174,
        wind_gust: 1.31,
        wind_speed: 0.96,
      },
      {
        clouds: 0,
        dew_point: 7.06,
        dt: 1715065200,
        feels_like: 18.43,
        humidity: 45,
        pop: 0,
        pressure: 1022,
        temp: 19.27,
        uvi: 2.81,
        visibility: 10000,
        weather: [Array],
        wind_deg: 127,
        wind_gust: 1.88,
        wind_speed: 1.36,
      },
      {
        clouds: 0,
        dew_point: 7.49,
        dt: 1715068800,
        feels_like: 21.35,
        humidity: 39,
        pop: 0,
        pressure: 1021,
        temp: 22.07,
        uvi: 5.05,
        visibility: 10000,
        weather: [Array],
        wind_deg: 113,
        wind_gust: 2.65,
        wind_speed: 2.1,
      },
      {
        clouds: 0,
        dew_point: 6.52,
        dt: 1715072400,
        feels_like: 24.7,
        humidity: 30,
        pop: 0,
        pressure: 1020,
        temp: 25.33,
        uvi: 6.89,
        visibility: 10000,
        weather: [Array],
        wind_deg: 109,
        wind_gust: 2.77,
        wind_speed: 2.65,
      },
      {
        clouds: 0,
        dew_point: 4.03,
        dt: 1715076000,
        feels_like: 27.49,
        humidity: 21,
        pop: 0,
        pressure: 1019,
        temp: 29,
        uvi: 7.57,
        visibility: 10000,
        weather: [Array],
        wind_deg: 111,
        wind_gust: 2.58,
        wind_speed: 2.84,
      },
      {
        clouds: 0,
        dew_point: 3.07,
        dt: 1715079600,
        feels_like: 28.08,
        humidity: 18,
        pop: 0,
        pressure: 1018,
        temp: 29.87,
        uvi: 6.89,
        visibility: 10000,
        weather: [Array],
        wind_deg: 113,
        wind_gust: 2.31,
        wind_speed: 2.82,
      },
      {
        clouds: 0,
        dew_point: 2.57,
        dt: 1715083200,
        feels_like: 28.41,
        humidity: 17,
        pop: 0,
        pressure: 1017,
        temp: 30.3,
        uvi: 5.04,
        visibility: 10000,
        weather: [Array],
        wind_deg: 114,
        wind_gust: 2.31,
        wind_speed: 2.83,
      },
      {
        clouds: 0,
        dew_point: 2.41,
        dt: 1715086800,
        feels_like: 28.27,
        humidity: 17,
        pop: 0,
        pressure: 1016,
        temp: 30.13,
        uvi: 2.77,
        visibility: 10000,
        weather: [Array],
        wind_deg: 112,
        wind_gust: 2.49,
        wind_speed: 2.86,
      },
      {
        clouds: 0,
        dew_point: 2.74,
        dt: 1715090400,
        feels_like: 27.7,
        humidity: 18,
        pop: 0,
        pressure: 1016,
        temp: 29.38,
        uvi: 0.99,
        visibility: 10000,
        weather: [Array],
        wind_deg: 111,
        wind_gust: 2.67,
        wind_speed: 2.85,
      },
      {
        clouds: 0,
        dew_point: 4.21,
        dt: 1715094000,
        feels_like: 26,
        humidity: 25,
        pop: 0,
        pressure: 1017,
        temp: 26,
        uvi: 0.16,
        visibility: 10000,
        weather: [Array],
        wind_deg: 116,
        wind_gust: 2.89,
        wind_speed: 2.12,
      },
      {
        clouds: 0,
        dew_point: 4.25,
        dt: 1715097600,
        feels_like: 20.71,
        humidity: 33,
        pop: 0,
        pressure: 1018,
        temp: 21.63,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 129,
        wind_gust: 1.42,
        wind_speed: 1.17,
      },
      {
        clouds: 0,
        dew_point: 4.68,
        dt: 1715101200,
        feels_like: 19.46,
        humidity: 36,
        pop: 0,
        pressure: 1019,
        temp: 20.42,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 169,
        wind_gust: 0.93,
        wind_speed: 0.5,
      },
      {
        clouds: 0,
        dew_point: 5.14,
        dt: 1715104800,
        feels_like: 18.94,
        humidity: 39,
        pop: 0,
        pressure: 1020,
        temp: 19.88,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 219,
        wind_gust: 0.99,
        wind_speed: 0.61,
      },
      {
        clouds: 0,
        dew_point: 5.56,
        dt: 1715108400,
        feels_like: 18.49,
        humidity: 41,
        pop: 0,
        pressure: 1020,
        temp: 19.42,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 240,
        wind_gust: 1.16,
        wind_speed: 0.89,
      },
      {
        clouds: 0,
        dew_point: 6.07,
        dt: 1715112000,
        feels_like: 18.14,
        humidity: 44,
        pop: 0,
        pressure: 1020,
        temp: 19.03,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 247,
        wind_gust: 1.2,
        wind_speed: 1.02,
      },
      {
        clouds: 0,
        dew_point: 6.75,
        dt: 1715115600,
        feels_like: 17.78,
        humidity: 47,
        pop: 0,
        pressure: 1020,
        temp: 18.63,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 254,
        wind_gust: 1.12,
        wind_speed: 1.02,
      },
      {
        clouds: 0,
        dew_point: 7.43,
        dt: 1715119200,
        feels_like: 17.43,
        humidity: 51,
        pop: 0,
        pressure: 1020,
        temp: 18.22,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 246,
        wind_gust: 1.23,
        wind_speed: 1.14,
      },
      {
        clouds: 0,
        dew_point: 8,
        dt: 1715122800,
        feels_like: 17.08,
        humidity: 54,
        pop: 0,
        pressure: 1021,
        temp: 17.83,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 246,
        wind_gust: 1.18,
        wind_speed: 1.08,
      },
      {
        clouds: 0,
        dew_point: 8.3,
        dt: 1715126400,
        feels_like: 16.97,
        humidity: 56,
        pop: 0,
        pressure: 1020,
        temp: 17.68,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 241,
        wind_gust: 1.48,
        wind_speed: 1.44,
      },
      {
        clouds: 0,
        dew_point: 8.49,
        dt: 1715130000,
        feels_like: 16.56,
        humidity: 58,
        pop: 0,
        pressure: 1020,
        temp: 17.26,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 230,
        wind_gust: 1.35,
        wind_speed: 1.15,
      },
      {
        clouds: 0,
        dew_point: 8.46,
        dt: 1715133600,
        feels_like: 15.68,
        humidity: 61,
        pop: 0,
        pressure: 1021,
        temp: 16.39,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 176,
        wind_gust: 0.97,
        wind_speed: 0.91,
      },
      {
        clouds: 0,
        dew_point: 8.35,
        dt: 1715137200,
        feels_like: 14.89,
        humidity: 64,
        pop: 0,
        pressure: 1021,
        temp: 15.6,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 192,
        wind_gust: 1.27,
        wind_speed: 1.23,
      },
      {
        clouds: 0,
        dew_point: 8.22,
        dt: 1715140800,
        feels_like: 14.45,
        humidity: 65,
        pop: 0,
        pressure: 1022,
        temp: 15.18,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 223,
        wind_gust: 1.48,
        wind_speed: 1.37,
      },
      {
        clouds: 0,
        dew_point: 8.44,
        dt: 1715144400,
        feels_like: 15.68,
        humidity: 60,
        pop: 0,
        pressure: 1022,
        temp: 16.42,
        uvi: 0.19,
        visibility: 10000,
        weather: [Array],
        wind_deg: 225,
        wind_gust: 1.4,
        wind_speed: 1.25,
      },
      {
        clouds: 0,
        dew_point: 8.65,
        dt: 1715148000,
        feels_like: 20.27,
        humidity: 46,
        pop: 0,
        pressure: 1022,
        temp: 20.92,
        uvi: 1.07,
        visibility: 10000,
        weather: [Array],
        wind_deg: 188,
        wind_gust: 1.15,
        wind_speed: 0.82,
      },
      {
        clouds: 0,
        dew_point: 8.97,
        dt: 1715151600,
        feels_like: 23.76,
        humidity: 39,
        pop: 0,
        pressure: 1022,
        temp: 24.26,
        uvi: 2.9,
        visibility: 10000,
        weather: [Array],
        wind_deg: 129,
        wind_gust: 1.76,
        wind_speed: 1.25,
      },
      {
        clouds: 0,
        dew_point: 8.5,
        dt: 1715155200,
        feels_like: 26.44,
        humidity: 33,
        pop: 0,
        pressure: 1022,
        temp: 26.44,
        uvi: 5.21,
        visibility: 10000,
        weather: [Array],
        wind_deg: 114,
        wind_gust: 2.43,
        wind_speed: 1.99,
      },
      {
        clouds: 0,
        dew_point: 7.03,
        dt: 1715158800,
        feels_like: 27.09,
        humidity: 27,
        pop: 0,
        pressure: 1021,
        temp: 28.17,
        uvi: 7.11,
        visibility: 10000,
        weather: [Array],
        wind_deg: 115,
        wind_gust: 2.89,
        wind_speed: 2.55,
      },
      {
        clouds: 0,
        dew_point: 5.41,
        dt: 1715162400,
        feels_like: 27.79,
        humidity: 22,
        pop: 0,
        pressure: 1019,
        temp: 29.35,
        uvi: 7.85,
        visibility: 10000,
        weather: [Array],
        wind_deg: 118,
        wind_gust: 3.15,
        wind_speed: 2.87,
      },
      {
        clouds: 0,
        dew_point: 4.2,
        dt: 1715166000,
        feels_like: 28.44,
        humidity: 19,
        pop: 0,
        pressure: 1018,
        temp: 30.28,
        uvi: 7.04,
        visibility: 10000,
        weather: [Array],
        wind_deg: 119,
        wind_gust: 3.27,
        wind_speed: 3.1,
      },
      {
        clouds: 0,
        dew_point: 3.43,
        dt: 1715169600,
        feels_like: 28.73,
        humidity: 18,
        pop: 0,
        pressure: 1017,
        temp: 30.67,
        uvi: 5.05,
        visibility: 10000,
        weather: [Array],
        wind_deg: 122,
        wind_gust: 3.59,
        wind_speed: 3.32,
      },
      {
        clouds: 0,
        dew_point: 3.15,
        dt: 1715173200,
        feels_like: 28.59,
        humidity: 18,
        pop: 0,
        pressure: 1017,
        temp: 30.5,
        uvi: 2.74,
        visibility: 10000,
        weather: [Array],
        wind_deg: 124,
        wind_gust: 3.91,
        wind_speed: 3.58,
      },
      {
        clouds: 0,
        dew_point: 3.31,
        dt: 1715176800,
        feels_like: 27.83,
        humidity: 19,
        pop: 0,
        pressure: 1017,
        temp: 29.52,
        uvi: 0.99,
        visibility: 10000,
        weather: [Array],
        wind_deg: 121,
        wind_gust: 4.15,
        wind_speed: 3.67,
      },
      {
        clouds: 0,
        dew_point: 4.43,
        dt: 1715180400,
        feels_like: 26.18,
        humidity: 25,
        pop: 0,
        pressure: 1017,
        temp: 26.18,
        uvi: 0.16,
        visibility: 10000,
        weather: [Array],
        wind_deg: 122,
        wind_gust: 4.57,
        wind_speed: 2.58,
      },
      {
        clouds: 0,
        dew_point: 4.42,
        dt: 1715184000,
        feels_like: 21.03,
        humidity: 32,
        pop: 0,
        pressure: 1018,
        temp: 21.94,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 138,
        wind_gust: 1.86,
        wind_speed: 1.64,
      },
      {
        clouds: 0,
        dew_point: 4.76,
        dt: 1715187600,
        feels_like: 19.72,
        humidity: 36,
        pop: 0,
        pressure: 1019,
        temp: 20.66,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 155,
        wind_gust: 1.36,
        wind_speed: 1.16,
      },
      {
        clouds: 0,
        dew_point: 5.06,
        dt: 1715191200,
        feels_like: 19.04,
        humidity: 38,
        pop: 0,
        pressure: 1020,
        temp: 19.99,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 174,
        wind_gust: 1.21,
        wind_speed: 0.88,
      },
      {
        clouds: 0,
        dew_point: 5.47,
        dt: 1715194800,
        feels_like: 18.31,
        humidity: 41,
        pop: 0,
        pressure: 1020,
        temp: 19.26,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 207,
        wind_gust: 0.96,
        wind_speed: 0.6,
      },
      {
        clouds: 0,
        dew_point: 6.14,
        dt: 1715198400,
        feels_like: 17.88,
        humidity: 45,
        pop: 0,
        pressure: 1021,
        temp: 18.77,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 234,
        wind_gust: 1.05,
        wind_speed: 0.74,
      },
      {
        clouds: 0,
        dew_point: 6.88,
        dt: 1715202000,
        feels_like: 17.35,
        humidity: 48,
        pop: 0,
        pressure: 1021,
        temp: 18.22,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 233,
        wind_gust: 0.98,
        wind_speed: 0.82,
      },
      {
        clouds: 0,
        dew_point: 7.51,
        dt: 1715205600,
        feels_like: 17,
        humidity: 52,
        pop: 0,
        pressure: 1021,
        temp: 17.81,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 213,
        wind_gust: 1.18,
        wind_speed: 1.13,
      },
      {
        clouds: 0,
        dew_point: 7.76,
        dt: 1715209200,
        feels_like: 16.43,
        humidity: 55,
        pop: 0,
        pressure: 1021,
        temp: 17.22,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 198,
        wind_gust: 1.93,
        wind_speed: 1.96,
      },
      {
        clouds: 0,
        dew_point: 7.48,
        dt: 1715212800,
        feels_like: 15.56,
        humidity: 57,
        pop: 0,
        pressure: 1021,
        temp: 16.38,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 195,
        wind_gust: 2.52,
        wind_speed: 2.41,
      },
      {
        clouds: 0,
        dew_point: 7.06,
        dt: 1715216400,
        feels_like: 14.47,
        humidity: 59,
        pop: 0,
        pressure: 1022,
        temp: 15.34,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 197,
        wind_gust: 2.26,
        wind_speed: 1.97,
      },
      {
        clouds: 0,
        dew_point: 6.96,
        dt: 1715220000,
        feels_like: 13.88,
        humidity: 61,
        pop: 0,
        pressure: 1022,
        temp: 14.76,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 204,
        wind_gust: 2.45,
        wind_speed: 2.18,
      },
      {
        clouds: 0,
        dew_point: 7.31,
        dt: 1715223600,
        feels_like: 13.43,
        humidity: 64,
        pop: 0,
        pressure: 1022,
        temp: 14.28,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 208,
        wind_gust: 2.32,
        wind_speed: 2.12,
      },
      {
        clouds: 0,
        dew_point: 7.87,
        dt: 1715227200,
        feels_like: 13.17,
        humidity: 68,
        pop: 0,
        pressure: 1023,
        temp: 13.94,
        uvi: 0,
        visibility: 10000,
        weather: [Array],
        wind_deg: 210,
        wind_gust: 2.1,
        wind_speed: 1.92,
      },
    ],
    lat: -22.8093,
    lon: 30.5546,
    timezone: "Africa/Johannesburg",
    timezone_offset: 7200,
  };

  return (
    <View style={styles.container}>
      <CustomStatusBar />
      <View style={styles.headerContainer}>
        <TouchableOpacity
          onPress={() => navigation.goBack()}
          style={styles.backButton}
        >
          <Ionicons name="chevron-back" size={30} color="white" />
        </TouchableOpacity>
        <Text style={styles.titleText}>Play Audio</Text>
      </View>
      {readWeatherAudioData && (
        <Button
          title="Play Audio"
          onPress={() => {
            playWeatherAudio(readWeatherAudioData);
          }}
        />
      )}
      <Button
        title="One Call 3"
        onPress={() => {
          const pretoria = {
            latitude: -25.751876,
            longitude: 28.205968,
          };
          const makonde = {
            latitude: -22.809275,
            longitude: 30.554646,
          };
          fetchWeatherForecast(makonde);
        }}
      />
      {weatherReading && <Text style={styles.readText}>{weatherReading}</Text>}
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: "#303030",
    alignItems: "center",
    // justifyContent: "center",
  },

  headerContainer: {
    backgroundColor: "#303030",
    height: DEVICE_HEIGHT * 0.07,
    width: "100%",
    // justifyContent: "center",
    alignItems: "center",
    flexDirection: "row",
    paddingHorizontal: 10,
    // elevation: 2,
  },
  backButton: {
    // backgroundColor: "white",
    height: DEVICE_HEIGHT * 0.06,
    width: DEVICE_HEIGHT * 0.06,
    justifyContent: "center",
    alignItems: "center",
  },
  titleText: {
    color: "white",
    fontSize: 17,
    marginLeft: 7,
    fontWeight: "bold",
  },
  readText: {
    color: "white",
    fontSize: 17,
    marginTop: 27,
    fontWeight: "bold",
  },
});
